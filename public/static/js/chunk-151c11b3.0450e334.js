(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-151c11b3"],{"3b43":function(e,t,a){},"70f6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"tag-group"},[a("span",{staticClass:"tag-group__title"},[e._v(e._s(e.$t("table_common.total"))+":")]),e._l(e.noteitems,(function(t){return a("el-tag",{key:t.label,attrs:{type:t.type,effect:"plain"}},[e._v(" "+e._s(t.label)+"ï¼š"+e._s(t.num)+" ")])}))],2),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-form",{ref:"filters",attrs:{inline:!0,model:e.filters}},[a("el-form-item",{attrs:{label:e.$t("search_common.sel3"),prop:"date"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"To","start-placeholder":e.$t("search_common.startDate"),"end-placeholder":e.$t("search_common.endDate"),"value-format":e.format,"picker-options":e.pickerOptions},model:{value:e.filters.date,callback:function(t){e.$set(e.filters,"date",t)},expression:"filters.date"}})],1),a("el-form-item",[a("el-select",{attrs:{placeholder:e.$t("search_common.tip1")},model:{value:e.filters.type,callback:function(t){e.$set(e.filters,"type",t)},expression:"filters.type"}},e._l(e.optionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticClass:"ipt1",attrs:{placeholder:e.$t("search_common.tip2"),clearable:""},model:{value:e.filters.search,callback:function(t){e.$set(e.filters,"search",t)},expression:"filters.search"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},domProps:{textContent:e._s(e.$t("form.searchBtn"))},on:{click:e.search_btn}}),a("el-button",{attrs:{icon:"el-icon-refresh"},domProps:{textContent:e._s(e.$t("table.resetFilter"))},on:{click:function(t){return e.resetForm("filters")}}})],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"highlight-current-row":"","header-cell-style":{background:"#f5f7fa",borderTop:"1px solid #ebeef5"}},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"index",label:e.$t("table_common.Ticket"),width:"80px",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary",underline:!1},nativeOn:{click:function(a){return e.onPrint(t.row)}}},[e._v(e._s(e.$t("table_common.Print"))+" ")])]}}])}),a("el-table-column",{attrs:{prop:"user_id",label:e.$t("table_common.gameID"),align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary",underline:!1},nativeOn:{click:function(a){return e.detailBtn(t.row.user_id)}}},[e._v(e._s(t.row.user_id)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"login_name",label:e.$t("table_common.account"),align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:e.$t("table_common.beforeRecharge"),align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(Math.abs(t.row.Balance-t.row.Amount-t.row.gift).toFixed(2))+" ")]}}])}),a("el-table-column",{attrs:{prop:"Amount",label:e.$t("table_common.Recharged"),align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"gift",label:e.$t("table_common.Offered"),align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"Balance",label:e.$t("table_common.afterRecharge"),align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"Oper_ip",label:e.$t("table_common.IPAdd"),align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"Cashier_login_name",label:e.$t("table_common.cashier"),align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"agent_login_name",label:e.$t("table_common.manager"),align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"Note",label:e.$t("table_common.remark"),align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"Date_time",label:e.$t("table_common.RechargeDate"),align:"center","show-overflow-tooltip":!0}})],1),a("div",{staticClass:"el-col el-col-24 toolbar toolbar-pages cust-main-page"},[a("div",{staticClass:"el-pagination is-background"},[a("button",{staticClass:"btn-prev",attrs:{type:"button",disabled:1==e.currentPage},on:{click:function(t){return e.handleCurrentChange("prev")}}},[e._v("prev")]),a("button",{staticClass:"btn-next",attrs:{type:"button",disabled:e.next_status},on:{click:function(t){return e.handleCurrentChange("next")}}},[e._v("next")]),a("span",{staticClass:"el-pagination__sizes"},[a("el-select",{staticClass:"m-2",attrs:{placeholder:"Select",size:"small"},on:{change:e.handleSizeChange},model:{value:e.pageSize,callback:function(t){e.pageSize=t},expression:"pageSize"}},e._l([20,30,50,100],(function(e){return a("el-option",{key:e,attrs:{label:e+"/page",value:e}})})),1)],1),a("span",{staticClass:"el-pagination__jump"},[e._v("Go to "),a("div",{staticClass:"el-input el-input--mini el-pagination__editor is-in-pagination"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.gopage,expression:"gopage"}],staticClass:"el-input__inner",attrs:{min:"1",type:"number",autocomplete:"off"},domProps:{value:e.gopage},on:{change:e.handleGoPage,input:function(t){t.target.composing||(e.gopage=t.target.value)}}})])])])]),a("el-dialog",{attrs:{visible:e.invoiceFormVisible,"before-close":e.handleClose,center:""},on:{"update:visible":function(t){e.invoiceFormVisible=t}}},[a("p",[e._v("Successfully! You can "),a("el-link",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.saveinvoice.apply(null,arguments)}}},[e._v("Print")]),e._v(" the ticket.")],1),a("div",{ref:"invoiceModel",attrs:{id:"invoiceModel"}},[a("h1",[e._v("Ticket")]),a("p",[a("label",[e._v("Game ID:")]),e._v(e._s(e.invoice.user_id))]),a("p",[a("label",[e._v("ACCOUNT:")]),e._v(e._s(e.invoice.login_name))]),a("p",[a("label",[e._v("DEPOSIT:")]),e._v(e._s(e.invoice.Amount))]),a("p",[a("label",[e._v("REMARK:")]),e._v(e._s(e.invoice.Note))]),a("p",{staticClass:"total_balance"},[a("label",[e._v("TOTAL BALANCE:")]),e._v(e._s(e.invoice.Balance))]),a("p",[a("label",[e._v("DATE:")]),e._v(e._s(e.invoice.Date_time))])])]),a("UserInfo",{attrs:{user_detail:e.user_detail}})],1)},i=[],o=(a("ac1f"),a("841c"),a("a9e3"),a("159b"),a("d81d"),a("1276"),a("466d"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("3ca3"),a("ddb0"),a("2b3d"),a("c0e9")),l=a.n(o),r=a("5308"),s=a("ed08"),c=a("d33d"),u={components:{UserInfo:c["a"]},data:function(){return{user_detail:{uid:"",UserDataVisible:!1},filters:{search:"",type:1,date:""},optionList:[{value:1,label:"Search by Account"},{value:2,label:"Search by ID"}],user:JSON.parse(r["a"].get("user")),list:[],listLoading:!1,sels:[],color:"#7f7f7f",addFormVisible:!1,total:0,currentPage:1,pageSize:20,format:"yyyy-MM-dd",pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"Today",onClick:function(e){var t=new Date,a=new Date;e.$emit("pick",[a,t])}},{text:"Yesterday",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-864e5),t.setTime(t.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"This week",onClick:function(e){var t=new Date,a=new Date,n=a.getDay(),i=a.getDate();0!=n&&a.setDate(i-n),e.$emit("pick",[a,t])}},{text:"Last week",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5);var a=t.getDay(),n=new Date,i=new Date;0==a?(n.setDate(t.getDate()),i.setDate(t.getDate()+6)):(n.setTime(t.getTime()-864e5*a),i.setTime(t.getTime()+864e5*(6-a))),e.$emit("pick",[n,i])}}]},invoiceFormVisible:!1,invoice:{},noteitems:[{type:"",label:"Total recharge",num:0},{type:"",label:"Total Offer",num:0}],gopage:1,next_status:!1}},mounted:function(){var e=Object(s["c"])(new Date);this.filters.date=[e,e],this.getList()},methods:{search_btn:function(){this.currentPage=1,this.pageSize=20,this.gopage=1,this.getList()},getList:function(){var e=this,t={type:this.filters.type,search:this.filters.search,page:this.currentPage,limit:this.pageSize};this.filters.date&&(t["begin_time"]=this.filters.date[0],t["end_time"]=this.filters.date[1]),this.$api.rechargeList(t).then((function(t){var a=t.data,n=a.code,i=a.data,o=a.msg,l=a.count;200===n?(e.total=l,e.noteitems[0].num=i.data_sum.total_recharge,e.noteitems[1].num=i.data_sum.total_offer,e.list=i.list,e.next_status=i.list.length<e.pageSize):e.$message.error(o)}))},handleClick:function(){},handleSizeChange:function(){this.getList()},handleCurrentChange:function(e){this.currentPage="next"==e?this.currentPage+1:this.currentPage-1,this.gopage=this.currentPage,this.getList()},handleGoPage:function(){this.currentPage=Number(this.gopage),this.getList()},resetForm:function(e){this.filters={search:"",type:1,date:[]},this.currentPage=1,this.pageSize=20,this.gopage=1,this.getList()},selsChange:function(e){this.sels=e},getSumaries:function(e){var t=e.columns,a=e.data,n=[];return t.forEach((function(e,t){if(0===t)n[t]="Total";else if(4===t){var i=a.map((function(t){return Number(t[e.property])}));i.every((function(e){return isNaN(e)}))?n[t]="--":n[t]=i.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0)}else n[t]="--"})),n},onPrint:function(e){this.invoice=e,this.invoiceFormVisible=!0},handleClose:function(){this.invoiceFormVisible=!1},saveinvoice:function(){this.saveImage("invoiceModel",this.invoice.Date_time)},dataURLToBlob:function(e){var t=e.split(","),a=t[0].match(/:(.*?);/)[1],n=atob(t[1]),i=n.length,o=new Uint8Array(i);while(i--)o[i]=n.charCodeAt(i);return new Blob([o],{type:a})},saveImage:function(e,t){var a=this.$refs[e],n=this,i=document.createElement("a");l()(a).then((function(e){var a=document.body.appendChild(e);a.style.display="none",i.style.display="none",document.body.removeChild(a);var o=n.dataURLToBlob(a.toDataURL("image/png"));i.setAttribute("href",URL.createObjectURL(o)),i.setAttribute("download",t+".png"),document.body.appendChild(i),i.click(),URL.revokeObjectURL(o),document.body.removeChild(i)}))},detailBtn:function(e){this.user_detail.uid=e,this.user_detail.UserDataVisible=!0}}},p=u,m=(a("8d18"),a("2877")),d=Object(m["a"])(p,n,i,!1,null,"d0af557a",null);t["default"]=d.exports},"8d18":function(e,t,a){"use strict";a("3b43")},d81d:function(e,t,a){"use strict";var n=a("23e7"),i=a("b727").map,o=a("1dde"),l=o("map");n({target:"Array",proto:!0,forced:!l},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);